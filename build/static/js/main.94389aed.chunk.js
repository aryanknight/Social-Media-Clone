(this["webpackJsonpsocial-media-client"]=this["webpackJsonpsocial-media-client"]||[]).push([[0],{100:function(e,t,n){},122:function(e,t,n){},123:function(e,t,n){},125:function(e,t,n){},126:function(e,t,n){},127:function(e,t,n){"use strict";n.r(t);var c=n(0),a=n(9),r=n.n(a),i=n(54),s=n(23),o=n(82),l=Object(i.a)({postReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_ALL":return t.post;case"CREATE":return[].concat(Object(o.a)(e),[t.post]);case"UPDATE":return e.map((function(e){return e._id==t.post._id?t.post:e}));case"DELETE":return e.filter((function(e){return e._id!==t.postId}));default:return e}},postEdit:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"EDIT":return console.log(t.postId),t.postId;case"NULL":return null;default:return e}}}),u=n(24),j=n(42),d=n(12),b=n(18),O=n.n(b),f=n(27),p=n(160),h=n(129),x=n(55),m=n(164),v=(n(100),n.p+"static/media/icon_1.d9bd42ac.png"),g=n.p+"static/media/icon_2.beb42662.png",y=n(73),E=n(4);function N(e){var t=e.setAuth,n=Object(c.useState)(null),a=Object(u.a)(n,2),r=a[0],i=a[1],s=Object(d.f)();Object(c.useEffect)((function(){var e=Math.random();e=Math.round(e),i(e%2===0?v:g)}),[r]);var o=function(){var e=Object(f.a)(O.a.mark((function e(n){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:localStorage.setItem("User",JSON.stringify(n.profileObj)),t(!0),s.push("/home");case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(E.jsx)(p.a,{container:!0,justify:"center",children:Object(E.jsxs)(h.a,{id:"form",children:[Object(E.jsx)(x.a,{align:"center",variant:"h4",color:"primary",id:"title",children:"Social Media App"}),Object(E.jsx)("div",{id:"avtar",children:Object(E.jsx)("img",{src:r})}),Object(E.jsx)(y.GoogleLogin,{clientId:"514619959932-r5hf6lj8r3v6mcuiih8l940pmc8e89d1.apps.googleusercontent.com",render:function(e){return Object(E.jsx)(m.a,{color:"primary",fullWidth:!0,onClick:e.onClick,disabled:e.disabled,variant:"contained",children:"Google Sign In"})},onSuccess:o,onFailure:function(){},cookiePolicy:"single_host_origin"})]})})}var k=n(175),C=n(173),_=n(15),S=n(174),T=n(165),I=n(78),w=n.n(I),L=function(e){return{type:"CREATE",post:e}},A=function(e){return{type:"UPDATE",post:e}},D=function(e){return{type:"DELETE",postId:e}},U=n(46),P=n.n(U),W="https://immense-dusk-88921.herokuapp.com/posts",F=function(e){return P.a.post(W,e)},J=function(e){return P.a.patch(W,e)};n(122);function R(){var e=Object(d.f)(),t=Object(c.useState)({creator:"",title:"",caption:"",tags:"",selectedFile:""}),n=Object(u.a)(t,2),a=n[0],r=n[1],i=Object(s.b)(),o=Object(s.c)((function(e){return e.postReducer})),l=Object(s.c)((function(e){return e.postEdit})),j=Object(c.useState)("Creating"),b=Object(u.a)(j,2),p=b[0],v=b[1],g=Object(c.useState)("POST"),y=Object(u.a)(g,2),N=y[0],k=y[1],C=Object(c.useState)(!1),I=Object(u.a)(C,2),D=I[0],U=I[1];Object(c.useEffect)((function(){if(l){k("UPDATE"),v("Editing");var e=o.find((function(e){return e._id===l}));r(e)}}),[l]);var P=function(){var e=Object(f.a)(O.a.mark((function e(t){var n,c,s,o;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),!l){e.next=13;break}return U(!0),e.next=5,J(a);case 5:n=e.sent,n.data,r(Object(_.a)({},a)),i(A(a)),U(!1),i({type:"NULL"}),e.next=22;break;case 13:return U(!0),e.next=16,F(a);case 16:c=e.sent,s=c.data,o=s._id,r(Object(_.a)(Object(_.a)({},a),{},{_id:o})),i(L(a)),U(!1);case 22:W();case 23:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),W=function(){r({creator:"",title:"",caption:"",tags:"",selectedFile:""}),i({type:"NULL"}),v("Creating"),k("POST")};return Object(E.jsxs)(h.a,{id:"create-form",children:[Object(E.jsxs)(x.a,{align:"center",variant:"h5",children:[p," Post"]}),Object(E.jsxs)("form",{onSubmit:P,children:[Object(E.jsx)("div",{className:"text-fields",children:Object(E.jsx)(S.a,{name:"title",label:"Title",variant:"outlined",fullWidth:!0,value:a.title,onChange:function(e){return r(Object(_.a)(Object(_.a)({},a),{},{title:e.target.value}))}})}),Object(E.jsx)("div",{className:"text-fields",children:Object(E.jsx)(S.a,{name:"creator",label:"Creator Name",variant:"outlined",fullWidth:!0,value:a.creator,onChange:function(e){return r(Object(_.a)(Object(_.a)({},a),{},{creator:e.target.value}))}})}),Object(E.jsx)("div",{className:"text-fields",children:Object(E.jsx)(S.a,{name:"caption",label:"Caption",variant:"outlined",fullWidth:!0,value:a.caption,onChange:function(e){return r(Object(_.a)(Object(_.a)({},a),{},{caption:e.target.value}))}})}),Object(E.jsx)("div",{className:"text-fields",children:Object(E.jsx)(S.a,{name:"tags",label:"Tags seprated by space",variant:"outlined",fullWidth:!0,value:a.tags,onChange:function(e){return r(Object(_.a)(Object(_.a)({},a),{},{tags:e.target.value}))}})}),Object(E.jsx)("div",{className:"text-fields",children:Object(E.jsx)(w.a,{multiple:!1,onDone:function(e){var t=e.base64;return r(Object(_.a)(Object(_.a)({},a),{},{selectedFile:t}))}})}),Object(E.jsxs)(m.a,{type:"submit",variant:"outlined",color:"primary",fullWidth:!0,children:[N," \xa0 ",D?Object(E.jsx)(T.a,{color:"primary",size:20}):null]}),Object(E.jsx)("div",{className:"text-fields",children:Object(E.jsx)(m.a,{variant:"outlined",color:"secondary",fullWidth:!0,onClick:W,children:"Clear"})}),Object(E.jsx)("div",{className:"text-fields",children:Object(E.jsx)(m.a,{variant:"contained",color:"secondary",fullWidth:!0,onClick:function(){localStorage.clear(),e.push("/")},children:"Logout"})})]})]})}var M=n(167),G=n(168),H=n(176),z=n(169),B=n(170),q=n(171),K=n(172),Q=n(79),V=n.n(Q),X=n(166),Y=n(81),Z=n.n(Y),$=n(80),ee=n.n($),te=(n(123),Object(X.a)({media:{height:0,paddingTop:"56.25%"}}));function ne(e){var t=e.post,n=Object(c.useState)(t.likeCount),a=Object(u.a)(n,2),r=a[0],i=a[1],o=te(),l=Object(s.b)(),j=function(){var e=Object(f.a)(O.a.mark((function e(){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n=t._id,P.a.delete(W,{data:{_id:n}});case 2:e.sent,l(D(t._id));case 4:case"end":return e.stop()}var n}),e)})));return function(){return e.apply(this,arguments)}}(),d=function(){var e=Object(f.a)(O.a.mark((function e(){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,J({_id:t._id,likeCount:r});case 2:i(r+1);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(E.jsxs)(M.a,{className:"card",children:[Object(E.jsx)(G.a,{avatar:Object(E.jsx)(H.a,{src:"https://source.unsplash.com/random"}),action:Object(E.jsx)(z.a,{title:"Edit Post",onClick:function(){l({type:"EDIT",postId:t._id})},children:Object(E.jsx)(V.a,{className:"edit-icon"})}),title:Object(E.jsx)("h2",{className:"font_1",children:t.creator})}),Object(E.jsx)(B.a,{className:o.media,image:t.selectedFile}),Object(E.jsxs)(q.a,{children:[Object(E.jsx)("h2",{className:"font ",children:t.title}),Object(E.jsx)("h3",{className:"font_1 margin",children:t.caption}),Object(E.jsx)("h3",{className:"margin font_1",children:t.tags})]}),Object(E.jsxs)(K.a,{children:[Object(E.jsxs)(z.a,{onClick:d,children:[Object(E.jsx)(ee.a,{className:"card-icons"}),Object(E.jsx)("div",{className:"like-count",children:r})]}),Object(E.jsx)(z.a,{onClick:j,children:Object(E.jsx)(Z.a,{color:"primary"})})]})]})}function ce(){var e=Object(s.c)((function(e){return e.postReducer})),t=Object(s.b)();return Object(c.useEffect)((function(){(function(){var e=Object(f.a)(O.a.mark((function e(){var n,c;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P.a.get(W);case 2:n=e.sent,c=n.data,t({type:"FETCH_ALL",post:c});case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]),Object(E.jsx)(p.a,{container:!0,spacing:3,children:e.map((function(e){return Object(E.jsx)(p.a,{item:!0,xs:12,md:6,children:Object(E.jsx)(ne,{post:e})},e._id)}))})}n(125);function ae(){JSON.parse(localStorage.getItem("User"));return Object(E.jsx)(k.a,{in:!0,children:Object(E.jsx)("main",{children:Object(E.jsx)(C.a,{children:Object(E.jsxs)(p.a,{container:!0,spacing:3,children:[Object(E.jsx)(p.a,{item:!0,xs:12,md:8,children:Object(E.jsx)(ce,{})}),Object(E.jsx)(p.a,{item:!0,xs:12,md:4,children:Object(E.jsx)(R,{})})]})})})})}var re=n(83);function ie(e){var t=e.component,n=e.isAuth,a=Object(re.a)(e,["component","isAuth"]),r=JSON.parse(localStorage.getItem("User"));null===r||void 0===r||r.googleId;return Object(c.useEffect)((function(){console.log(r),r&&(null===r||void 0===r?void 0:r.googleId)}),[r]),Object(E.jsx)(d.b,Object(_.a)(Object(_.a)({},a),{},{render:function(e){return n?Object(E.jsx)(t,{}):Object(E.jsx)(d.a,{to:"/"})}}))}function se(){var e=Object(c.useState)(),t=Object(u.a)(e,2),n=t[0],a=t[1];return Object(E.jsxs)(j.a,{children:[Object(E.jsx)(d.b,{exact:!0,path:"/",children:Object(E.jsx)(N,{setAuth:a})}),Object(E.jsx)(ie,{exact:!0,path:"/home",component:ae,isAuth:n})]})}n(126);var oe=document.getElementById("root"),le=Object(i.b)(l);r.a.render(Object(E.jsx)(s.a,{store:le,children:Object(E.jsx)(se,{})}),oe)}},[[127,1,2]]]);
//# sourceMappingURL=main.94389aed.chunk.js.map